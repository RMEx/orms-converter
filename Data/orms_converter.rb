#==============================================================================
# ** ORMS Converter
#------------------------------------------------------------------------------
# By Joke @biloumaster <joke@biloucorp.com>
# GitHub: https://github.com/RMEx/OLD_RM_STYLE
#==============================================================================

#==============================================================================
# ** SceneManager
#==============================================================================

module SceneManager
  #--------------------------------------------------------------------------
  # * Execute
  #--------------------------------------------------------------------------
  def self.run
    Converter.run
    while true
      Converter.update
      Graphics.update
      Input.update
    end
  end
end

#==============================================================================
# ** Converter
#==============================================================================

class Converter
  #--------------------------------------------------------------------------
  # * Singleton
  #--------------------------------------------------------------------------
  class << self
    #--------------------------------------------------------------------------
    # * Execute
    #--------------------------------------------------------------------------
    def run
      @bg = Sprite.new
      @bg.opacity = 0
      @bg.bitmap = Bitmap.new(544,662)
      @bg.bitmap.fill_rect(0,0,544,662,Color.new(255,255,255))
      @bg.set_transition('opacity', 255, 15, :OutQuad)
      set_transition('screen_height', 640, 30, :OutBack)
      30.times {update_transition('screen_height')}
    end
    #--------------------------------------------------------------------------
    # * Get screen height
    #--------------------------------------------------------------------------
    def screen_height
      Graphics.height
    end
    #--------------------------------------------------------------------------
    # * Set screen height
    #--------------------------------------------------------------------------
    def screen_height=(h)
      @bg.update_transition('opacity')
      h = 491 if h.to_i == 490 # mdr
      Resolution.change(Graphics.width, h.to_i)
      Graphics.update
    end
    #--------------------------------------------------------------------------
    # * Update
    #--------------------------------------------------------------------------
    def update
    end
  end
end